---
layout: post
title: "FreeSWITCH on OpenBSD"
date: 2013-03-28
comments: false
categories:
 - FreeSWITCH
---

<div class='post'>
Been a while since I posted. If you're reading this post you, you probably came in from your  favourite search engine while searching for OpenBSD and FreeSWITCH.<br /><br /><a href="http://www.freeswitch.org/" target="_blank">FreeSWITCH</a> is a software voice switch which handles any manner of <a href="http://wiki.freeswitch.org/wiki/Specsheet" target="_blank">voice related activities</a>.<br /><br />These days <a href="http://wiki.answers.com/Q/How_many_phone_calls_are_made_every_day_in_the_world" rel="nofollow" target="_blank">voice is pretty important</a>, and the backend infrastructure which implements it is in a decades long process of migrating from the traditional&nbsp; POTS (Plain Old Telephone System) to an <a href="http://arstechnica.com/information-technology/2013/01/the-telephone-network-is-obsolete-get-ready-for-the-all-ip-telco/" target="_blank">all IP phone system</a>. FreeSWITCH is definitely going to be on the platforms that ushers in the next generation of telecom. While I have some reservations about how the project is developed and maintained, it has a lot of things going for it like stability and a remarkable feature set.<br /><br />Using FreesSWITCH on OpenBSD might seem like a good idea seeing as how OpenBSD has the spectacular pf firewall, excellent security history and doesn't move very far in weird and zany directions.<br /><br />FreeSWITCH on the other hand can't seem to stop moving in weird and zany directions. They (even after moving to stable release tarballs) suggest that checking the source out from git is the best way to the most current and stable versions and don't blink twice at dragging the entire source tree of their dependencies into their git repository. The FreeSWITCH developers attitude towards using system versions of their dependencies ranges from <a href="http://jira.freeswitch.org/browse/FS-353" target="_blank">aggressive no's to rampant apathy</a>. I understand their reasoning (which is not exactly wrong), though for me this is pretty odd considering that pretty much every other major project doesn't have this problem.<br /><br />So OpenBSD and FreeSWITCH... Where to start.<br /><br />At the time of writing there is no port of FreeSWITCH for OpenBSD, or any substantial package built for any major open source operating system.&nbsp; Nor is there likely to be without some serious effort. The only way to use the software is to jump though the git checkout hoops and run their gigantic build process through from start to finish (yawn). Debugging their build process on other operating systems than linux is a pain as well, given the dependency on stuff like gnu make, the position of the planets in the night sky and the inclusion of dependencies in their source tree.<br /><br />There have been thousands of hours of effort put into making those dependencies 'work' properly on OpenBSD (nevermind all the other platforms out there). And replicating all that work into FreeSWITCH source tree just seems dumb and a waste of time (which it is).<br /><br />My proposed solution (and admittedly a work in progress without a finish line in sight) is the creation something along the lines of a shallow fork of upstream FreeSWITCH that could actually be used as an OpenBSD port.<br /><br />First order of business is the build system, and again since we're talking about OpenBSD, I am not talking about using autoconf, gnu make, cmake, imake, scons, or any number of build suites. Really, I'm just talking about vanilla <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make" target="_blank">OpenBSD make</a> (<a href="http://mail-index.netbsd.org/netbsd-users/2008/10/11/msg002183.html" target="_blank">here is an interesting thread on BSD Make</a>). Of course, use system libraries or existing tested ports wherever possible.&nbsp; The source tree should contain just those files actually needed for creating a bare installation<br /><br /><br />There are a long list of modules that also need porting, including some core requirements like mod_sofia.<br /><br />After that there needs to be some work done on things like moving configuration to /etc, logs to /var/log and various other activities consistent with making FreeSWITCH a valid citizen on OpenBSD. <br /><br />As I said, this is a work in progress, you can see the progress <a href="https://github.com/tbullock/freeswitch-openbsd" target="_blank">here on github</a>.</div>
